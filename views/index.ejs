<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- displays site properly based on user's device -->
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
     <!-- style Sheet Link -->
      <link rel="stylesheet" href="/styles/main.css">
      <!-- Bootstrap CSS CDN -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <title>Frontend Mentor | Weather app</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
    <style>
        .attribution {
            font-size: 11px;
            text-align: center;
        }

        .attribution a {
            color: hsl(228, 45%, 44%);
        }
    </style>
</head>

<body class="body">

    <div class="container clearbg">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 " id="header"> <a href="/"
                class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none"> 
                <img src="/assets/images/logo.svg" alt="Logo"> 
                
               </a>

            <div class="units-block">
                <div class="custom-dropdown" id="unitsDropdown">
            
                    <!-- Hidden input (important for form submit) -->
                    <input type="hidden" name="units" id="unitsValue" form="search-form" required>
            
                    <!-- Selected Display -->
                    <div class="dropdown-selected">
                        <img src="/assets/images/icon-units.svg" class="icon">
                        <span>Units</span>
                        <span class="arrow"><img src="/assets/images/icon-dropdown.svg" alt=""></span>
                    </div>
            
                    <!-- Dropdown Menu -->
                    <div class="dropdown-menu">
            
                        <div class="dropdown-title">Switch to Imperial / Metric</div>
            
                        <div class="dropdown-group">
                            <div class="group-label">Temperature</div>
                            <div class="dropdown-item" data-value="celsius">Celsius (Â°C)</div>
                            <div class="dropdown-item" data-value="fahrenheit">Fahrenheit (Â°F)</div>
                        </div>
            
                        <div class="dropdown-group">
                            <div class="group-label">Wind Speed</div>
                            <div class="dropdown-item" data-value="km/h">km/h</div>
                            <div class="dropdown-item" data-value="mph">mph</div>
                        </div>
            
                        <div class="dropdown-group">
                            <div class="group-label">Precipitation</div>
                            <div class="dropdown-item" data-value="millimeters">Millimeters (mm)</div>
                            <div class="dropdown-item" data-value="Inches">Inches (in)</div>
                        </div>
            
                    </div>
                </div>
            </div>
                   
        </header>
    </div>


    <div class="search-city-block container">
    
        <h1>How's the sky looking today?</h1>
    <form action="/search" method="post" id="search-form">
        <div class="search-wrapper">
            <img src="/assets/images/icon-search.svg" class="search-icon">
            <input type="search" name="city" placeholder="Search for a place..." class="search-input" autocomplete="off" required>
            <button type="submit">Search</button>
        </div>
    
        <ul class="matching_city"></ul>
    </form>
               
          
                <div class="no-result-message">
                    <p><%= noResult %></p>
                </div>
     
   
        <%if (error) { %>
        
            <div class="api-error-message">
                <img src="/assets/images/icon-error.svg" alt="error Icon" >
                <p>
                    <%= error %>!
                </p>

                <a href="/">
                    <img src="/assets/images/icon-retry.svg" alt="Retry Icon"> Retry
                </a>
            </div>
              
            <% } %>

           
    </div>

  


 <%if (weather) { %>
     

   <section class="" id="temperature-info-block">
    
    <main class="weather-info">
        <div class="country-date-info">
            <!-- Country -->
            <% if (locals.result) { %>
            <h3 class="country-name">
                <%= result.name %>, <%= result.country %>
            </h3>
          <% } %>
            
            <!-- Date -->
            <p class="date">
                <%= longDate %>
            </p>
        </div>
        <div class="icon-temp-info">
            <!-- Weather Icon -->    
            <img src="<%= locals.iconSrc %>" alt="Weather Icon" class="weather-icon">
            <!-- Insert current temperature here -->
            <h2 class="current-temperature">
                 <%= weather.current.temperature_2m %> <sup class="daily_temp_unit">o</sup>
            </h2>
        </div>

    </main>

    
    <div class="hourly-data">
        <h3 class="hourly-data-title">Hourly forecast</h3>
        <div class="hourly-data-values">
            <!-- Insert hourly forecast for the next 24 hours here -->
            <div class="hourly-data-item">
                <p class="hourly-time">1 PM</p>
                <img src="" alt="Weather Icon" class="hourly-weather-icon">
                <p class="hourly-temperature">20<sup>o</sup></p>
            </div>
            <div class="hourly-data-item">
                <p class="hourly-time">2 PM</p>
                <img src="/assets/images/icon-partly-cloudy.webp" alt="Weather Icon" class="hourly-weather-icon">
                <p class="hourly-temperature">21<sup>o</sup></p>
            </div>
            <div class="hourly-data-item">
                <p class="hourly-time">3 PM</p>
                <img src="/assets/images/icon-partly-cloudy.webp" alt="Weather Icon" class="hourly-weather-icon">
                <p class="hourly-temperature">22<sup>o</sup></p>
            </div>
        </div>
    </div>
   
    <div class="sub-info">
    
            <!-- Insert temperature here -->
            <div class="sub-data">
               <h3 class="sub-data-title">Feels like</h3>
               <div class="sub-data-value">
                <!-- Insert "feels like" temperature here -->
                 <p><%= weather.current.apparent_temperature %>Â°</p>
                    
             </div>
            </div>
    
            <!-- Insert humidity here -->
            <div class="sub-data">
                <h3 class="sub-data-title">Humidity</h3>
                <div class="sub-data-value">
                    <!-- Insert humidity percentage here -->
                    <p><%= weather.current.relative_humidity_2m %>%</p>
               </div>
            </div>
    
            <!-- Insert wind here -->
             <div class="sub-data">
             <h3 class="sub-data-title">Wind</h3>             
             <div class="sub-data-value">
                <p><%= weather.current.wind_speed_10m %> km/h</p>
            </div>
           
             
             </div>
    
             <div class="sub-data">
            <h3 class="sub-data-title">Precipitation</h3>
            <div class="sub-data-value">
                 <p><%= weather.current.precipitation %> mm</p>
            </div>
            </div>
    </div>

<!-- Insert daily forecast for the next 7 days here -->
   
    <div class="daily-forecast">
        <h3 class="forecast-data-title container">Daily forecast</h3>
        <div class="daily-forecast-values">
    
         <%if (weather && weather.daily.time) { %>
            <%weather.daily.time.forEach((day, index) => { %>
                <div class="daily-forecast-item">
                    <p class="daily-forecast-day">
                        <%= new Date(day).toLocaleDateString('en-US', { weekday: 'short' }) %>
                    </p>

                    <% 
                       const weatherCode = weather.daily.weather_code[index];
                       var iconSrc = '/assets/images/icon-partly-cloudy.webp'; // Default icon
                        if (weatherCode >= 0 && weatherCode <= 19) {
                            iconSrc =  '/assets/images/icon-sunny.webp';
                        } else if (weatherCode >= 20 && weatherCode <= 29) {
                            iconSrc = '/assets/images/icon-rain.webp';
                        } else if (weatherCode >= 30 && weatherCode <= 39) {
                            iconSrc = '/assets/images/icon-storm.webp';
                        }
                        else if (weatherCode >= 40 && weatherCode <= 49) {
                            iconSrc = '/assets/images/icon-fog.webp';
                        } else if (weatherCode >= 50 && weatherCode <= 59) {
                            iconSrc = '/assets/images/icon-drizzle.webp';
                        } else if (weatherCode >= 60 && weatherCode <= 69) {
                            iconSrc = '/assets/images/icon-rain.webp';
                        } else if (weatherCode >= 70 && weatherCode <= 79) {
                            iconSrc = '/assets/images/icon-snow.webp';
                        } else if (weatherCode >= 80 && weatherCode <= 89) {
                            iconSrc = '/assets/images/icon-rain.webp';
                        } else if (weatherCode >= 95 && weatherCode <= 99) {
                            iconSrc = '/assets/images/icon-storm.webp';
                        }
                    %>



                    <img src="<%= iconSrc %>" alt="Weather Icon" class="daily-weather-icon">

                    <p class="daily-forecast-temperature">
                        <span class="max-temp">
                            <%= Math.round(weather.daily.temperature_2m_max[index]) %><sup>o</sup>
                        </span>

                        <span class="min-temp">
                        <%= Math.round(weather.daily.temperature_2m_min[index]) %><sup>o</sup>
                        </span>
                    </p>
                </div>
            <% }) %>
         <% } %>
                <!-- <div class="daily-forecast-item">
                    <p class="daily-forecast-day">Thurs</p>
                    <img src="/assets/images/icon-partly-cloudy.webp" alt="Weather Icon" class="daily-weather-icon">
                    <p class="daily-forecast-temperature">
                        <span>
                            23<sup>o</sup>
                        </span>
                
                        
                    </p>
                </div> -->
           
           </div>
         </div>
    </section>

    <% } %>
    

        
<footer>
    
        <div class="attribution">
            Challenge by <a href="https://www.frontendmentor.io?ref=challenge">Frontend Mentor</a>.
            Coded by <a href="#">Your Name Here</a>.
        </div>

</footer>

<!-- Bootstrap JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    ></script>
    <script src="/js/main.js"></script>
</body>

</html>